/* UmbralTable VTT - Dark Fantasy RÃºnica (montagem) */
:root{
  --vtt-bg0:#03050a;
  --vtt-bg1:#070b12;
  --vtt-stone:#0b0f16;
  --vtt-wood:#0a0d12;
  --vtt-iron:#161a22;
  --vtt-bronze:#8a6a22;
  --vtt-gold:#d6b35f;
  --vtt-line:rgba(148,163,184,.16);
  --vtt-text:#e5e7eb;
  --vtt-muted:#94a3b8;
  --arc:#4cc3ff;
  --ember:#ff7a1a;
}

.vtt-root{
  position:fixed; inset:0;
  background:rgba(0,0,0,.68);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 24000;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 18px;
}

.vtt-shell{
  width:min(1320px, calc(100vw - 36px));
  height:min(860px, calc(100vh - 36px));
  border-radius: 18px;
  border:1px solid rgba(214,179,95,.22);
  box-shadow: 0 26px 70px rgba(0,0,0,.72);
  overflow:hidden;
  background:
    radial-gradient(1200px 700px at 25% -20%, rgba(76,195,255,.10), transparent 60%),
    radial-gradient(900px 600px at 80% -10%, rgba(255,122,26,.08), transparent 62%),
    linear-gradient(180deg, rgba(2,6,23,.92), rgba(2,6,23,.78));
}

.vtt-topbar{
  height: 62px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 10px 12px;
  border-bottom:1px solid var(--vtt-line);
  background:
    radial-gradient(700px 140px at 30% -30%, rgba(255,122,26,.10), transparent 60%),
    radial-gradient(700px 140px at 60% -30%, rgba(76,195,255,.10), transparent 60%),
    linear-gradient(180deg, rgba(15,23,42,.80), rgba(3,6,18,.78));
}

.vtt-brand{display:flex; align-items:center; gap:12px;}
.vtt-sigil{
  width:36px;height:36px;border-radius:12px;
  border:1px solid rgba(214,179,95,.28);
  background:
    radial-gradient(circle at 30% 30%, rgba(214,179,95,.22), rgba(214,179,95,.04));
  position:relative;
}
.vtt-sigil:after{
  content:"";
  position:absolute; inset:7px;
  border-radius: 10px;
  border:1px solid rgba(76,195,255,.22);
  box-shadow: 0 0 18px rgba(76,195,255,.18);
  animation: runePulse 3.2s ease-in-out infinite;
}
.vtt-title{color:#f8fafc; font-weight: 900; letter-spacing:.18em; text-transform:uppercase; font-size:12px;}
.vtt-sub{color:var(--vtt-muted); font-size:12px;}

.vtt-tools{display:flex; align-items:center; gap:10px;}
.vtt-toolbtn{
  border:1px solid var(--vtt-line);
  background: rgba(2,6,23,.55);
  color:var(--vtt-text);
  padding: 8px 10px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 800;
  font-size: 12px;
}
.vtt-toolbtn:hover{border-color: rgba(214,179,95,.28)}
.vtt-close{
  margin-left: 4px;
  width: 36px; height: 36px;
  border-radius: 12px;
  border:1px solid rgba(214,179,95,.28);
  background: rgba(2,6,23,.55);
  color: var(--vtt-text);
  cursor:pointer;
  font-weight: 900;
}

.vtt-body{
  height: calc(100% - 62px);
  display:grid;
  grid-template-columns: 290px 1fr 300px;
}

.panel-title{
  font-size: 12px;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: rgba(214,179,95,.9);
  margin-bottom: 10px;
}

.vtt-left{
  padding: 14px;
  border-right:1px solid var(--vtt-line);
  background:
    radial-gradient(500px 340px at 50% 0%, rgba(214,179,95,.08), transparent 60%),
    linear-gradient(180deg, rgba(10,14,20,.72), rgba(7,10,16,.88));
}

.vtt-chat{
  height: calc(100% - 86px);
  border:1px solid rgba(255,255,255,.10);
  border-radius: 14px;
  background:
    linear-gradient(180deg, rgba(5,6,10,.65), rgba(5,6,10,.48));
  padding: 10px 10px;
  overflow:auto;
}

.chat-line{font-size:12px; color: var(--vtt-text); line-height:1.35; padding: 6px 6px; border-radius: 10px;}
.chat-line .who{font-weight: 900; color:#f8fafc;}
.chat-line.narrative{background: rgba(255,122,26,.06); border:1px solid rgba(255,122,26,.10)}
.chat-line.roll{background: rgba(76,195,255,.06); border:1px solid rgba(76,195,255,.10)}
.chat-line.action{background: rgba(214,179,95,.06); border:1px solid rgba(214,179,95,.10)}

.vtt-chatbox{
  margin-top: 10px;
  display:flex;
  gap: 10px;
}
.vtt-chatbox input{
  flex:1;
  border-radius: 12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(2,6,23,.55);
  color: var(--vtt-text);
  padding: 10px 10px;
}
.vtt-chatbox .send{
  border-radius: 12px;
  border:1px solid rgba(214,179,95,.22);
  background: rgba(214,179,95,.10);
  color:#f8fafc;
  font-weight: 900;
  padding: 10px 12px;
}

.vtt-center{
  padding: 14px;
  background:
    radial-gradient(1200px 900px at 50% 10%, rgba(76,195,255,.08), transparent 60%),
    linear-gradient(180deg, rgba(2,6,23,.40), rgba(2,6,23,.62));
}

.map-frame{
  width:100%;
  height:100%;
  border-radius: 18px;
  border:1px solid rgba(214,179,95,.20);
  position:relative;
  overflow:hidden;
  box-shadow: 0 26px 70px rgba(0,0,0,.55);
}

.rune-frame{
  position:absolute; inset:0;
  border-radius: 18px;
  pointer-events:none;
  background:
    linear-gradient(90deg, rgba(214,179,95,.10), transparent 22%, transparent 78%, rgba(214,179,95,.10)),
    linear-gradient(180deg, rgba(214,179,95,.10), transparent 18%, transparent 82%, rgba(214,179,95,.10));
}
.rune-frame:before{
  content:"";
  position:absolute; inset:10px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  box-shadow:
    0 0 0 1px rgba(214,179,95,.08) inset,
    0 0 26px rgba(76,195,255,.06),
    0 0 26px rgba(255,122,26,.06);
  animation: runePulse 3.2s ease-in-out infinite;
}

.map-inner{
  position:absolute; inset:12px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background:
    radial-gradient(900px 700px at 35% 20%, rgba(255,122,26,.06), transparent 60%),
    radial-gradient(800px 650px at 70% 30%, rgba(76,195,255,.06), transparent 62%),
    linear-gradient(180deg, rgba(2,6,23,.60), rgba(2,6,23,.82));
  overflow:hidden;
}

.arcane-circle{
  position:absolute;
  inset:-20%;
  background:
    radial-gradient(circle at 50% 50%, rgba(76,195,255,.10), transparent 55%),
    radial-gradient(circle at 50% 50%, rgba(255,122,26,.08), transparent 52%);
  filter: blur(0.2px);
  opacity: .55;
  animation: slowSpin 18s linear infinite;
}

.dungeon{
  position:absolute; inset:0;
  background:
    radial-gradient(1000px 800px at 50% 30%, rgba(255,255,255,.06), transparent 62%),
    repeating-linear-gradient(45deg, rgba(255,255,255,.02), rgba(255,255,255,.02) 12px, transparent 12px, transparent 24px),
    linear-gradient(180deg, rgba(15,23,42,.25), rgba(2,6,23,.55));
  opacity: .9;
}

.grid{
  position:absolute; inset:0;
  display:grid;
  grid-template-columns: repeat(20, 1fr);
  grid-template-rows: repeat(20, 1fr);
  opacity: .55;
}
.cell{
  border:1px solid rgba(148,163,184,.08);
}

.fog{
  position:absolute; inset:0;
  pointer-events:none;
}
.fog-mask{
  position:absolute; inset:-20%;
  background:
    radial-gradient(circle at 30% 30%, rgba(0,0,0,.80), rgba(0,0,0,.92)),
    radial-gradient(circle at 70% 60%, rgba(0,0,0,.72), rgba(0,0,0,.92));
  opacity: .72;
  animation: fogWobble 6s ease-in-out infinite;
}
.fog-reveal{
  position:absolute;
  width: 340px; height: 340px;
  transform: translate(-50%,-50%);
  border-radius: 999px;
  background: radial-gradient(circle at 50% 50%, transparent 0 55%, rgba(0,0,0,.86) 62%, rgba(0,0,0,.96) 75%);
  mix-blend-mode: multiply;
  filter: blur(1px);
  opacity: .95;
}

.token{
  position:absolute;
  width:32px;height:32px;
  border-radius: 999px;
  transform: translateZ(0);
}
.token-face{
  position:absolute; inset:4px;
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.12);
}
.token-label{
  position:absolute; left: 50%; top: 40px;
  transform: translateX(-50%);
  font-size: 11px;
  color: rgba(255,255,255,.84);
  text-shadow: 0 10px 24px rgba(0,0,0,.65);
  white-space: nowrap;
  opacity: .85;
}

.ring-blue{ box-shadow: 0 0 0 2px rgba(76,195,255,.95), 0 0 18px rgba(76,195,255,.28); }
.ring-violet{ box-shadow: 0 0 0 2px rgba(167,139,250,.95), 0 0 18px rgba(167,139,250,.22); }
.ring-green{ box-shadow: 0 0 0 2px rgba(34,197,94,.95), 0 0 18px rgba(34,197,94,.18); }
.ring-red{ box-shadow: 0 0 0 2px rgba(239,68,68,.95), 0 0 18px rgba(239,68,68,.28); }

.enemy-aura:before{
  content:"";
  position:absolute; inset:-10px;
  border-radius: 999px;
  background: radial-gradient(circle at 50% 50%, rgba(239,68,68,.18), transparent 65%);
  filter: blur(0.2px);
  animation: auraPulse 1.9s ease-in-out infinite;
}

.idle-heavy{ animation: idleHeavy 2.8s ease-in-out infinite; }
.idle-sparks{ animation: idleSparks 2.6s ease-in-out infinite; }
.idle-shift{ animation: idleShift 2.2s ease-in-out infinite; }

.dice-fly{
  position:absolute;
  left: 14%;
  top: 22%;
  width: 140px;
  height: 140px;
  pointer-events:none;
  z-index: 8;
}
.d20{
  width: 92px; height: 92px;
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(20,20,24,.92), rgba(9,9,12,.92));
  border:1px solid rgba(255,122,26,.32);
  box-shadow: 0 0 0 1px rgba(76,195,255,.14), 0 26px 55px rgba(0,0,0,.62);
  transform: rotateX(24deg) rotateY(28deg);
  position:relative;
}
.d20:before{
  content:"";
  position:absolute; inset:-10px;
  border-radius: 22px;
  background: radial-gradient(circle at 40% 30%, rgba(255,122,26,.18), transparent 55%);
  filter: blur(1px);
}
.d20-face{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  color: rgba(255,122,26,.92);
  font-weight: 1000;
  font-size: 34px;
  text-shadow: 0 0 18px rgba(255,122,26,.35);
}
.dice-trail{
  position:absolute;
  left:-14px; top: 46px;
  width: 120px; height: 10px;
  background: linear-gradient(90deg, transparent, rgba(255,122,26,.38), rgba(76,195,255,.22), transparent);
  filter: blur(1px);
  opacity: .75;
}

.result-badge{
  position:absolute;
  left: 16px; bottom: 16px;
  padding: 10px 12px;
  border-radius: 14px;
  border:1px solid rgba(214,179,95,.22);
  background: rgba(2,6,23,.58);
  color: rgba(255,255,255,.92);
  font-size: 12px;
  z-index: 9;
}

.vtt-right{
  padding: 14px;
  border-left:1px solid var(--vtt-line);
  background:
    radial-gradient(500px 340px at 50% 0%, rgba(214,179,95,.08), transparent 60%),
    linear-gradient(180deg, rgba(10,14,20,.72), rgba(7,10,16,.88));
  position:relative;
  overflow:hidden;
}
.vtt-right.burst-on:after{
  content:"";
  position:absolute; inset:-20%;
  background:
    radial-gradient(circle at 70% 20%, rgba(255,122,26,.22), transparent 45%),
    radial-gradient(circle at 25% 45%, rgba(76,195,255,.18), transparent 50%);
  animation: burst 0.55s ease-out;
  pointer-events:none;
}

.dice-config{display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom: 12px;}
.cfg{border:1px solid rgba(255,255,255,.10); border-radius: 14px; background: rgba(2,6,23,.45); padding: 10px;}
.lbl{font-size: 12px; color: var(--vtt-muted); margin-bottom: 6px;}
.cfg input{
  width:100%;
  border-radius: 12px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(2,6,23,.55);
  color: var(--vtt-text);
  padding: 10px 10px;
  text-align:right;
  font-weight: 900;
}

.dice-grid{display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;}
.die{
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(2,6,23,.45);
  color: rgba(255,255,255,.9);
  padding: 12px 10px;
  cursor:pointer;
  font-weight: 1000;
  letter-spacing: .06em;
  position:relative;
  transform: translateZ(0);
}
.die.active{
  border-color: rgba(214,179,95,.35);
  background: linear-gradient(180deg, rgba(214,179,95,.18), rgba(214,179,95,.05));
}
.die.hover{
  transform: translateY(-2px);
  border-color: rgba(76,195,255,.28);
  box-shadow: 0 0 0 1px rgba(76,195,255,.10), 0 12px 30px rgba(0,0,0,.55);
}
.die.hover:after{
  content:"";
  position:absolute; inset:-1px;
  border-radius: 14px;
  box-shadow: 0 0 0 1px rgba(255,122,26,.18), 0 0 18px rgba(255,122,26,.10);
  animation: edgeFlash .26s ease-out;
}

.roll{
  margin-top: 12px;
  width:100%;
  padding: 14px 12px;
  border-radius: 16px;
  border:1px solid rgba(214,179,95,.30);
  background: linear-gradient(180deg, rgba(255,122,26,.18), rgba(214,179,95,.10));
  color:#f8fafc;
  font-weight: 1100;
  letter-spacing: .18em;
  text-transform: uppercase;
  cursor:pointer;
  animation: rollPulse 1.55s ease-in-out infinite;
}
.roll:disabled{opacity:.72; cursor:not-allowed; animation:none}

.players{
  border:1px solid rgba(255,255,255,.10);
  border-radius: 14px;
  background: rgba(2,6,23,.45);
  padding: 10px;
}
.p{color: rgba(255,255,255,.86); font-size: 12px; padding: 6px 6px; border-radius: 10px;}
.p + .p{margin-top: 4px}
.p:hover{background: rgba(214,179,95,.06)}

@keyframes runePulse{
  0%,100%{ filter: drop-shadow(0 0 0 rgba(76,195,255,0)) drop-shadow(0 0 0 rgba(255,122,26,0)); opacity: .85; }
  50%{ filter: drop-shadow(0 0 10px rgba(76,195,255,.24)) drop-shadow(0 0 10px rgba(255,122,26,.16)); opacity: 1; }
}
@keyframes slowSpin{ from{transform: rotate(0deg)} to{transform: rotate(360deg)} }
@keyframes fogWobble{
  0%,100%{ transform: translate(0,0) scale(1); opacity:.72 }
  50%{ transform: translate(-10px, 8px) scale(1.02); opacity:.78 }
}
@keyframes auraPulse{
  0%,100%{ transform: scale(1); opacity:.55 }
  50%{ transform: scale(1.12); opacity:.85 }
}
@keyframes idleHeavy{
  0%,100%{ transform: translateY(0) }
  50%{ transform: translateY(-1px) }
}
@keyframes idleSparks{
  0%,100%{ transform: translateY(0) }
  50%{ transform: translateY(-1px) }
}
@keyframes idleShift{
  0%,100%{ transform: translateX(0) }
  50%{ transform: translateX(1px) }
}
@keyframes edgeFlash{ from{opacity:1} to{opacity:0} }
@keyframes rollPulse{
  0%,100%{ box-shadow: 0 0 0 rgba(255,122,26,0), 0 0 0 rgba(76,195,255,0); }
  50%{ box-shadow: 0 0 24px rgba(255,122,26,.22), 0 0 18px rgba(76,195,255,.14); }
}
@keyframes burst{
  from{ opacity: 0; transform: scale(0.92) }
  45%{ opacity: 1; }
  to{ opacity: 0; transform: scale(1.04) }
}

